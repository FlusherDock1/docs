---
subtitle: Узнайте, как настроить службы для отправки почты.
---
# Конфигурация почтовой службы

October CMS предоставляет драйверы для SMTP, Mailgun, SparkPost, Amazon SES, PHP-функции mail и sendmail, что позволяет вам быстро приступить к отправке почты через локальную или облачную службу по вашему выбору. Существует два способа настроить почтовые службы: либо с помощью внутреннего интерфейса в разделе *Настройки → Настройки почты*, либо путем обновления значений конфигурации по умолчанию. В этих примерах мы будем обновлять значения конфигурации.

## Требования драйверов

В большинстве случаев вы можете использовать драйвер SMTP, и он будет поддерживаться большинством почтовых провайдеров. Однако использование драйверов на основе API часто является более простым и быстрым подходом.

### Драйвер Mailgun

Чтобы использовать драйвер Mailgun, установите Mailgun Mailer transport используя Composer.

```bash
composer require symfony/mailgun-mailer symfony/http-client
```

Затем установите для параметра `driver` в файле конфигурации `config/mail.php` значение `mailgun`. Затем убедитесь, что ваш файл конфигурации `config/services.php` содержит следующие параметры:

```php
'mailgun' => [
    'domain' => 'your-mailgun-domain',
    'secret' => 'your-mailgun-key',
    'endpoint' => 'api.mailgun.net', // api.eu.mailgun.net for EU
],
```

### Драйвер Postmark

Чтобы использовать драйвер Postmark, установите Postmark Mailer transport используя Composer.

```bash
composer require symfony/postmark-mailer symfony/http-client
```

Затем установите параметр `default` в файле конфигурации `config/mail.php` вашего приложения на `postmark`. Затем убедитесь, что ваш файл конфигурации `config/services.php` содержит следующие параметры:

```php
'postmark' => [
    'token' => env('POSTMARK_TOKEN'),
],
```

### Драйвер SES

Чтобы использовать драйвер Amazon SES, необходимо сначала установить Amazon AWS SDK для PHP. Вы можете установить эту библиотеку используя Composer.

```bash
composer require aws/aws-sdk-php
```

Затем установите параметр `default` в файле конфигурации `config/mail.php` вашего приложения на `ses`. Затем убедитесь, что ваш файл конфигурации `config/services.php` содержит следующие параметры:

```php
'ses' => [
    'key' => 'your-ses-key',
    'secret' => 'your-ses-secret',
    'region' => 'ses-region',  // e.g. us-east-1
],
```

## Почта и локальная разработка  

При разработке приложения, отправляющего электронную почту, вы, вероятно, не хотите на самом деле отправлять электронные письма на действующие адреса электронной почты. Есть несколько способов «отключить» фактическую отправку сообщений электронной почты.

### Драйвер Log

Одним из решений является использование почтового драйвера `log` во время локальной разработки. Этот драйвер будет записывать все сообщения электронной почты в файлы журнала для проверки. Для получения дополнительной информации о настройке вашего приложения для каждой среды ознакомьтесь с [документацией по настройке](../setup/configuration.md).

### Универсальный получатель

Другое решение — установить универсального получателя всех электронных писем, отправляемых фреймворком. Таким образом, все электронные письма, сгенерированные вашим приложением, будут отправляться на определенный адрес, а не на адрес, фактически указанный при отправке сообщения. Это можно сделать с помощью параметра `to` в файле конфигурации `config/mail.php`:

```php
'to' => [
    'address' => 'dev@example.com',
    'name' => 'Dev Example'
],
```

### Динамически отключить отправку

Вы можете динамически отключить отправку почты с помощью метода `Mail::pretend`. Когда почтовая программа находится в этом режиме, сообщения будут записываться в лог-файлы вашего приложения, а не отправляться получателю.

```php
Mail::pretend();
```

#### Смотрите также

::: also
* [Отправка писем](../extend/system/sending-mail.md)
:::
