---
subtitle: Узнайте как сконфигурировать и тонко настроить October CMS.
---
# Общая конфигурация

Все файлы конфигурации для October CMS хранятся в директории `config`. Каждый параметр конфигурации имеет встроенную документацию.

## Конфигурация окружения

Многие параметры October CMS можно настроить с помощью переменных окружения. Переменные окружения могут быть установлены на уровне сервера или определены для [виртуального хоста веб-приложения](https://httpd.apache.org/docs/2.4/env.html).

::: aside
October CMS использует [библиотеку DotEnv](https://github.com/vlucas/phpdotenv) чтобы упростить управление переменными окружения.
:::

Переменные окружения также можно указать в файле `.env`. Этот файл автоматически создается скриптом установки системы в корневой директории проекта. В чистой установке October CMS, в корневой директории есть файл `.env.example`, который демонстрирует типичные значения для локального окружения.

Пример параметров, с помощью которых можно указать параметры соединения с базой данных:

```ini
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=database
DB_USERNAME=root
DB_PASSWORD=
```

Любая переменная в файле `.env` может быть переопределена переменными внешнего окружения, определенными на уровне сервера или виртуального хоста.

Значения конфигурации загружаются в следующем порядке:

1. системные переменные окружения
2. переменные в файле .env
3. значения в файлах конфигурации

::: warning
Никогда не добавляйте файл `.env` в систему контроля версий. Если злоумышленник получит доступ к репозиторию, это будет представлять угрозу безопасности проекта.
:::

### Файлы конфигурации для конкретных сред

Если файл конфигурации должен быть загружен на основе текущего окружения приложения, например для staging или production окружения вы можете использовать переменную `APP_ENV` на уровне сервера. Пример конфигурации Apache:

```text
SetEnv APP_ENV "staging"
```

Когда определена переменная `APP_ENV`, платформа пытается загрузить файл `.env` с суффиксом, соответствующим окружению. например `.env.staging`. Если файл не существует, ошибки не будет. Если файлы `.env.staging` и `.env` существуют, файл `.env` полностью игнорируется.

## Общие параметры конфигурации

Есть несколько важных, часто используемых параметров конфигурации.

### Режим отладки (debug)

Параметр `debug` можно найти в файле `config/app.php`. По умолчанию значение загружается из переменной окружения `APP_DEBUG`. После установки системы, в файле `.env` режим отладки включен по умолчанию:

```ini
APP_DEBUG=true
```

Когда режим отладки включен, система показывает подробные сообщения об ошибках, вместе с дополнительной информации для отладки. Режим отладки должен быть обязательно отключен в боевом окружении. Иначе потенциально чувствительная информация будет показана посетителям сайта.

Возможности, предоставляемые режимом отладки:

* [детальные сообщения об ошибках](../cms/pages.md#error-page)
* при неудачной попытке авторизации отображается причина ошибки
* [комбинированные ассеты](../markup/filter-theme.md) не минифицируются по умолчанию
* [безопасный режим](../setup/configuration.md#safe-mode) отключен.

### Безопасный режим

Параметр `enable_safe_mode` можно найти в файле `config/cms.php`. По умолчанию значение загружается из переменной окружения `CMS_SAFE_MODE`. Безопасный режим отключает [PHP секции](../cms/themes.md#php-code-section) в шаблонах CMS.

Параметр может принимать одно из следующих значений:

* `true` - безопасный режим включен
* `false` - безопасный режим отключен
* `null` - безопасный режим активен если [режим отладки](../setup/configuration.md#debug-mode) отключен.

### CSRF защита

October CMS имеет встроенный механизм защиты от [Межсайтовой подделки запроса](https://owasp.org/www-community/attacks/csrf). Когда защита CSRF включена, October CMS хранит случайный токен в сеансе пользователя. [Тег открытия формы](../services/html.md#opening-a-form) и [тег токен формы](../services/html.md#form-tokens) добавляют в форму скрытое поле со значением токена. Для всех запросов POST, PUT или DELETE платформа проверяет, соответствует ли отправленное значение токена значению, хранящемуся в сеансе пользователя.

CSRF защита включена по умолчанию. Параметр `enable_csrf_protection` находится в файле `config/system.php`. По умолчанию, значение загружается из переменной окружения `ENABLE_CSRF`.

## Конфигурация боевого окружения

Следующая конфигурация рекомендуется для боевого окружения:

* CSRF защита включена
* режим отладки выкючен
* используйте [директорию public](../setup/web-server-config.md#public-folder) для дополнительной защиты.
