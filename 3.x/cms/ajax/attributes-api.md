---
subtitle: Взаимодействуйте с обработчиками, используя атрибуты HTML.
---
# Атрибуты API Data

Data атрибуты позволяют вам вызывать AJAX запрос без написания JavaScript кода. В большинстве случаев data атрибуты намного компактнее чем JavaScript код - вы пишите меньше кода, но получаете одинаковый результат. Список поддерживаемых data атрибутов:

data-request атрибут | Описание
------------- | -------------
**data-request** | Имя AJAX обработчика.
**data-request-confirm** | Сообщение для подтверждения. Сообщение с подтверждением появляется перед запросом. Если пользователь нажал "отменить", запрос не будет отправлен.
**data-request-redirect** | URL на который браузер выполнит редирект после успешного запроса.
**data-request-url** | URL на который будет отправлен запрос. по умолчанию: `window.location.href`
**data-request-update** | Список фрагментов и элементов страницы (CSS селекторы) для обновления. Формат: `partial: selector, partial: selector`. Использование кавычек обязательно в некоторых случаях, пример: `'my-partial': '#myelement'`. Если селектор имеет в начале строки символ `@`, контент полученный от сервера будет добавлен в конец элемента, вместо его замены. Если селектор имеет в начале строки символ `^`, контент полученный от сервера будет добавлен в начало элемента, вместо его замены
**data-request-ajax-global** | `false` по умолчанию. `true` для включения [jQuery ajax событий](http://api.jquery.com/category/ajax/global-ajax-event-handlers/) глобально : `ajaxStart`, `ajaxStop`, `ajaxComplete`, `ajaxError`, `ajaxSuccess` и `ajaxSend`.
**data-request-data** | Дополнительные `POST` данные для отправки на сервер. Формат: `var: value, var: value`. Можно использовать кавычки: `var: 'some string'`. Этот атрибут может быть указан в элементе, который вызвал событие, например, кнопка которая имеет `data-request` атрибут, на ближайшем элементе от элемента вызывавшего событие и на родительской форме. Фреймворк автоматически объединяет данные `data-request-data` атрибутов. Если разные элементы передают одинаковые параметры, фреймворк будет объеденять по следующим приоритетам: элемент вызвавший событие `data-request-data`, ближайший элемент `data-request-data`, и данные формы.
**data-request-before-update** | JavaScript код, который должен быть исполнен прямо перед тем как содержимое страницы обновится.
**data-request-success** | JavaScript код, который должен быть исполнен после того как запрос успешно выполнен.
**data-request-error** | JavaScript код, который должен быть исполнен после того как запрос вернулся с ошибкой.
**data-request-complete** | JavaScript код, который должен быть исполнен после того как запрос успешно выполнен или вернулся с ошибкой.
**data-request-loading** | CSS селектор элемента, который должен быть отображен пока запрос выполняется. Вы можете использовать эту опцию чтобы показать элемент загрузки. Использует функции jQuery `show()` и `hide()` для взаимодействия с элементом загрузки.
**data-request-form** |  CSS селектор формы, из которой надо брать данные для запроса. Если не указано, фреймворк сам заберет данные из ближайшей формы или если элемент вызывающий запрос находится внутри формы, соберет данные из нее.
**data-request-flash** | Когда указан, передает инструкции серверу чтобы очистить и передать любые Flash сообщения с ответом на запрос. Эта опция так же используется [дополнительными возможностями](./extras.md).
**data-request-files** | Когда указан, фреймворк прикрепит файлы к запросу, интерфейс `FormData` должен поддерживаться браузером.
**data-browser-validate** | Когда указан, будет выполнена валидация внутри браузера на стороне клиента перед отправкой запроса.
**data-track-input** | Может быть использован для элемента `text`, `number`, или `password`, у которых указан `data-request` атрибут. Когда включено, поле автоматически будет отправлять запросы когда пользователь взаимодействует с полем (пишет, меняет значения). Чтобы указать интервал отправки данных, можно указать значение атрибута в миллисекундах, чтобы фреймворк ждал между запросами определенное время.

Когда атрибут `data-request` указан, элемент вызывает AJAX запрос когда пользователь взаимодействует с ним. В зависимости от поля, запрос вызывается следующими событиями:

Элемент | Событие
------------- | -------------
**Формы** | Когда форма отправлена.
**Ссылки, кнопки** | Когда на элемент кликнули.
**Текст, число, и пароль** | Когда содержимое полей изменено (`change`), или если указан `data-track-input` сразу при вводе данных пользователем (`input`).
**Выпадающие списки, чекбоксы, радиокнопки** | Когда элемент выбран (`change`).

## Примеры использования

Задача: Вызов обработчика `onCalculate` при отправке формы. После выполнения обработчика необходимо обновить элемент с ID `result` содержимым фрагмента **calcresult**.

```html
<form data-request="onCalculate" data-request-update="calcresult: '#result'">
```

Задача: Запросить подтверждение действия при нажатии на кнопку "Удалить" перед отправкой формы.

```html
<form ... >
    ...
    <button data-request="onDelete" data-request-confirm="Are you sure?">Удалить</button>
```

Задача: Редирект на другую страницу после успешно выполненного запроса.

```html
<form data-request="onLogin" data-request-redirect="/admin">
```

Задача: Показать всплывающее окно после успешно выполненного запроса.

```html
<form data-request="onLogin" data-request-success="alert('Ура!')">
```

Задача: Отправить POST параметр `mode` со значением `update`.

```html
<form data-request="onUpdate" data-request-data="mode: 'update'">
```

Задача: Прикрепить один POST параметр `id` со значением `7` сразу к нескольким элементам.

```html
<div data-request-data="id: 7">
    <button data-request="onDelete">Удалить</button>
    <button data-request="onSave">Обновить</button>
</div>
```

Задача: Прикрепить [загружаемые файлы](../../extend/services/request-input.md) с запросом.

```html
<form data-request="onSubmit" data-request-files>
    <input type="file" name="photo" accept="image/*" />
    <button type="submit">Отправить</button>
</form>
```
